/* ============================================================================
   FOOTER – unico (mobile + desktop)
   - Elimina il gap bianco sotto (bleed nero + safe-area)
   - Freccia invio centrata (Material Icon) con fallback <span>
   ========================================================================== */

:host {
  display: block;
  width: 100%;
}

/* Base per qualunque classe footer rimasta nel template */
.footer,
.footer-desktop,
.footer-mobile {
  background: #000;
  color: #fff;
  text-align: center;
  border-top: 1px solid #222;
  margin: 0 !important;
  position: relative;
  isolation: isolate;

  /* “Bleed” nero sotto il footer per coprire qualunque spazio residuo */
  &::after {
    content: "";
    display: block;
    /* 64px di margine ottico + safe-area; se non serve, resta invisibile sotto */
    height: calc(64px + max(env(safe-area-inset-bottom, 0px), 0px));
    background: #000;
  }
}

/* ---------------------------
   Newsletter (comune)
   --------------------------- */
.newsletter,
.newsletter-desktop {
  margin: 0 auto 2rem;
  max-width: 980px;

  h2 {
    margin: 0 0 .5rem;
    font-weight: 800;
    letter-spacing: .2px;
  }

  p,
  .newsletter-subtitle {
    margin: 0 auto 1rem;
    color: #ccc;
  }

  /* Form */
  .newsletter-form,
  .newsletter-form-desktop {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: .6rem;
    width: 100%;
    margin: .25rem auto 0;
    max-width: 640px;

    input[type="email"] {
      flex: 1;
      min-width: 0;                       /* evita overflow */
      padding: .85rem 1.1rem;
      border: 1px solid #666;
      border-radius: 999px;
      background: #fff;
      color: #000;
      outline: none;
      font-size: 1rem;
      transition: border-color .2s ease, box-shadow .2s ease;

      &:focus {
        border-color: #bdbdbd;
        box-shadow: 0 0 0 3px rgba(255,255,255,.15);
      }
      &:disabled { opacity: .7; }
    }

    /* Bottone freccia circolare */
    button,
    .newsletter-submit {
      width: 3.25rem;
      height: 3.25rem;
      border: none;
      border-radius: 50%;
      background: #fff;
      color: #000;
      cursor: pointer;
      display: inline-grid;         /* centratura perfetta */
      place-items: center;
      padding: 0;
      transition: transform .08s ease, background-color .2s ease, box-shadow .2s ease;
      box-shadow: 0 4px 14px rgba(0,0,0,.22);

      &:hover:not(:disabled) {
        background: #f2f2f2;
        transform: translateX(1px);
        box-shadow: 0 6px 16px rgba(0,0,0,.25);
      }
      &:active:not(:disabled) {
        transform: translateX(0) scale(.98);
        box-shadow: 0 3px 10px rgba(0,0,0,.2);
      }
      &:disabled { opacity: .6; cursor: default; }

      /* icona Material */
      .mat-icon,
      mat-icon {
        font-size: 26px;
        line-height: 1;
        width: 1em;
        height: 1em;
        display: block;
      }

      /* fallback tipografico se usi ancora <span>→</span> */
      > span:not(.spinner) {
        font-size: 1.35rem;
        line-height: 1;
        font-weight: 800;
        transform: translateX(1px);
        display: block;
      }

      /* spinner durante l’invio */
      .spinner {
        width: 18px;
        height: 18px;
        border: 2px solid currentColor;
        border-top-color: transparent;
        border-radius: 50%;
        display: inline-block;
        animation: spin .8s linear infinite;
      }
    }
  }

  /* Messaggio risposta */
  p[ng-reflect-ng-if],
  .newsletter-response {
    margin-top: .9rem;
    font-size: .9rem;
    color: #ccc;
  }
}

/* ---------------------------
   Link utili (comune)
   --------------------------- */
.footer-links,
.footer-links-desktop {
  display: flex;
  justify-content: center;
  gap: 1.25rem;
  margin: 1.25rem 0 2rem;

  button {
    background: none;
    border: none;
    color: #fff;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: .3px;
    font-size: .9rem;
    cursor: pointer;
    padding: .5rem 1rem;
    transition: color .2s ease;

    &:hover { color: #ff69b4; }
  }
}

/* ---------------------------
   Social / contatti (comune)
   --------------------------- */
.footer-social,
.footer-social-desktop {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 1.25rem;
  margin-bottom: 1.75rem;

  a svg,
  .email-btn svg,
  .email-btn-desktop svg {
    width: 28px;
    height: 28px;
    fill: #fff;
    transition: transform .2s ease;
  }
  a:hover svg,
  .email-btn:hover svg,
  .email-btn-desktop:hover svg {
    transform: scale(1.2);
  }

  .email-btn,
  .email-btn-desktop {
    background: none;
    border: none;
    padding: 0;
    cursor: pointer;
  }
}

/* ---------------------------
   Frase legale (comune)
   --------------------------- */
.footer-tiur,
.footer-tiur-desktop {
  color: #ccc;
  line-height: 1.45;
  margin: 0 auto;
  max-width: 620px;
  padding-bottom: .25rem; /* piccolo respiro sopra il bleed */
}

/* ============================================================================
   MOBILE (≤ 768px)
   ========================================================================== */
@media (max-width: 768px) {
  .footer,
  .footer-mobile {
    padding: 2rem 1rem 0; /* 0: il bleed chiude a filo in basso */
  }

  .newsletter h2 { font-size: 1.22rem; }
  .newsletter p { font-size: .95rem; }

  .newsletter-form input[type="email"] {
    font-size: .96rem;
    padding: .75rem .9rem;
  }

  .newsletter-form button {
    width: 2.9rem;
    height: 2.9rem;

    .mat-icon { font-size: 22px; }
    .spinner  { width: 16px; height: 16px; }
  }

  .footer-links {
    flex-direction: column;
    gap: .45rem;
    margin: 1.25rem 0 1.75rem;
  }

  .footer-tiur { font-size: .78rem; max-width: 320px; }
}

/* ============================================================================
   DESKTOP (≥ 769px)
   ========================================================================== */
@media (min-width: 769px) {
  .footer,
  .footer-desktop {
    padding: 3rem 2rem 0; /* 0: il bleed chiude a filo in basso */
  }

  .newsletter h2 { font-size: 1.5rem; }
  .newsletter p { font-size: 1rem; }

  .newsletter-form-desktop input[type="email"] {
    font-size: 1rem;
    padding: .85rem 1.1rem;
  }

  .newsletter-form-desktop button {
    width: 3.25rem;
    height: 3.25rem;

    .mat-icon { font-size: 26px; }
  }

  .footer-links-desktop { gap: 1.6rem; }
  .footer-tiur-desktop { font-size: .86rem; }
}

/* ============================================================================
   Animazioni
   ========================================================================== */
@keyframes spin { to { transform: rotate(360deg); } }
