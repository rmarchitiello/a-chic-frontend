/* ============================================================================
   CATALOGO – SCSS UNIFICATO
   - Fondo SEMPRE bianco
   - Mobile-first con media query dedicate a mobile e desktop
   ========================================================================== */

/* ---------------------------
   Comuni
--------------------------- */
:host {
  display: block;
  background: #fff; /* sempre bianco */
}

/* Banner admin */
.admin-banner {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: .75rem;
  background: #ffeeba;
  color: #856404;
  border: 1px solid #ffeeba;
  padding: .75rem 1rem;
  margin: 1rem auto 0;
  border-radius: 8px;
  max-width: 980px;
  font-weight: 600;
  box-shadow: 0 2px 8px rgba(0,0,0,.08);

  .admin-action {
    display: inline-flex;
    align-items: center;
    gap: .4rem;
  }
}

/* Wrapper generico e griglia (set di default che poi afiniamo in media) */
.catalogo-wrapper {
  background: #fff;
  min-height: 100vh;
  padding: 1rem;
}

.cards-container {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr)); /* default 2 col (mobile-first) */
  gap: 1rem;
  margin-top: 1rem;
}

/* Card + media */
.image-wrapper { display: flex; flex-direction: column; align-items: center; }

.image-card {
  width: 100%;
  aspect-ratio: 1 / 1;
  border: none;
  border-radius: 8px;
  overflow: hidden;
  background: #fff; /* se il media è trasparente, resta bianco */
  padding: 0;
  margin: 0;
  position: relative;
}

.card-image-container {
  position: relative;
  inset: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

/* Media coerenti dentro la card */
.image-card img,
.image-card video {
  width: 100%;
  height: 100%;
  object-fit: cover;   /* riempie la card senza buchi */
  display: block;
  background: #fff;
}

/* Supporto ai nomi già presenti nel markup */
.media-video-mobile,
.media-video-desktop {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* Audio “centrato” nella card, usato se riproduci direttamente nella card */
.image-card .media-audio,
.image-card .media-audio-mobile,
.image-card .media-audio-desktop {
  position: absolute;
  left: 50%;
  top: 50%;
  width: min(90%, 520px);
  height: auto;
  transform: translate(-50%, -50%);
  background: transparent;
}

/* Stato quando l’overlay audio esterno è attivo */
.image-card.audio-attivo {
  pointer-events: none;
  opacity: .6;
}

/* Overlay icone */
.icon-wrapper {
  position: absolute;
  top: 8px;
  right: 8px;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 8px;
  z-index: 2;
}

.lens-icon,
.audio-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 6px;
  border-radius: 12px;
  background: rgba(255,255,255,.45);
  backdrop-filter: blur(4px);
  box-shadow: 0 2px 8px rgba(0,0,0,.18);
  cursor: pointer;
  transition: transform .18s ease;

  svg { width: 18px; height: 18px; fill: #333; }
  &:hover { transform: scale(1.08); }
}

/* Info sotto la card */
.image-info {
  padding-top: .5rem;
  text-align: center;

  h3 {
    margin: 0;
    font-size: 1rem;
    font-weight: 600;
    color: #222;
  }
  p {
    margin: .25rem 0 0;
    font-size: .9rem;
    color: #555;
  }
}

/* Paginazione */
.paginazione {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 1rem;
  margin: 1.25rem 0 0;

  .numero-pagina {
    font-size: .9rem;
    color: #444;
    font-family: 'Montserrat', sans-serif;
  }
}

/* Effetti hover SOLO sui device che hanno davvero hover (es. mouse) */
@media (hover: hover) {
  .image-card img { transition: transform .25s ease; }
  .image-card:hover img { transform: scale(1.04); }
}

/* ============================================================================
   MOBILE (≤ 768px)
   ========================================================================== */
@media (max-width: 768px) {
  .catalogo-wrapper { padding: 1rem; }

  .cards-container {
    grid-template-columns: repeat(2, minmax(0, 1fr)); /* 2 colonne su mobile */
    gap: 1rem;
    margin-top: 1.25rem;
  }

  .icon-wrapper { top: 8px; right: 8px; gap: 6px; }
  .lens-icon svg, .audio-icon svg { width: 18px; height: 18px; }

  .image-info h3 { font-size: 1rem; }
  .image-info p  { font-size: .9rem; }

  .paginazione { gap: 1rem; }
  .paginazione .numero-pagina { font-size: .85rem; }
}

/* ============================================================================
   DESKTOP (≥ 769px)
   ========================================================================== */
@media (min-width: 769px) {
  .catalogo-wrapper { padding: 2rem; }

  .cards-container {
    grid-template-columns: repeat(4, minmax(0, 1fr)); /* 4 colonne su desktop */
    gap: 1.5rem;
    margin-top: 2rem;
  }

  .image-card {
    border-radius: 10px;
    box-shadow: 0 0 12px rgba(0,0,0,.06);
    transition: box-shadow .25s ease;

    @media (hover: hover) {
      &:hover { box-shadow: 0 0 18px rgba(0,0,0,.14); }
    }
  }

  .icon-wrapper { top: 10px; right: 10px; gap: 10px; }
  .lens-icon svg, .audio-icon svg { width: 20px; height: 20px; }

  .image-info h3 { font-size: 1.1rem; }
  .image-info p  { font-size: 1rem; }

  .paginazione { gap: 1.25rem; margin-top: 1.75rem; }
  .paginazione .numero-pagina { font-size: 1rem; }
}

/* ============================================================================
   DIALOG / POPUP ADMIN (Angular Material) – full screen
   ========================================================================== */
::ng-deep .cdk-overlay-pane.popup-admin-editor {
  width: 100vw !important;
  height: 100vh !important;
  max-width: 100vw !important;
  max-height: 100vh !important;
  padding: 0 !important;
  margin: 0 !important;
  top: 0 !important;
  left: 0 !important;
  pointer-events: auto !important;
  z-index: 1100 !important;
}

::ng-deep .popup-admin-editor .mat-mdc-dialog-surface {
  width: 100% !important;
  height: 100% !important;
  background: #fff;
  box-shadow: none !important;
  border-radius: 0 !important;
  padding: 0 !important;
  display: flex !important;
  flex-direction: column !important;
}

::ng-deep .popup-admin-editor .mat-mdc-dialog-content {
  flex: 1 1 auto !important;
  overflow-y: auto !important;
  max-height: 100% !important;
  padding: 2rem !important;
}
