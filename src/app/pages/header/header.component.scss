

/* =========================================
   HEADER COMPONENT (app-header)
   - Sticky dentro lo scroller Material
   - Safe-area iOS gestita sull'header
   - Stili mobile e desktop
   ========================================= */

:host {
  display: block;
  width: 100%;
}

/* =====================================
   HEADER MOBILE: hamburger sx, logo centro
   ===================================== */
@media (max-width: 768px) {
  :host{
    position: fixed;
    top: var(--offset-top);          /* sotto eventuale topbar + safe-area */
    left: 0; right: 0;
    z-index: 1100;

    height: var(--bar-h);
    min-height: var(--bar-h);
    background: #fff !important;
    box-shadow: none !important;
    border-bottom: 0 !important;
    padding: 0 !important;           /* niente safe-area qui: siamo già sotto */
  }

  /* Forza la toolbar (e la sua row interna) ad usare una griglia 3 colonne */
  .mobile-header,
  .mobile-header > .mat-toolbar-row,
  .mobile-header > .mat-mdc-toolbar-row{
    background: transparent !important;
    color: #000 !important;
    box-shadow: none !important;
    border: 0 !important;

    display: grid !important;
    grid-template-columns: var(--bar-h) 1fr var(--bar-h); /* [menu][logo][spazio] */
    align-items: center;
    width: 100%;
    height: var(--bar-h);
    min-height: var(--bar-h) !important;

    white-space: nowrap;   /* evita l’andare a capo */
    text-align: left !important; /* annulla text-align:center globali */
  }

  /* evita hairline/righe dei temi */
  :host::before, :host::after,
  .mobile-header::before, .mobile-header::after{ content: none !important; }

  .menu-button{
    grid-column: 1;
    justify-self: start;
    border: 0; background: transparent;
    display: inline-flex; align-items: center; justify-content: center;
    width: var(--bar-h); height: var(--bar-h); padding: 0; margin: 0;
  }

  .mobile-header .mat-icon,
  .mobile-header mat-icon{
    color: currentColor; line-height: 1; display: block;
  }

  /* Logo centrato e inline, per non creare una nuova riga */
  .mobile-header .logo{
    grid-column: 2;
    justify-self: center;
    display: inline-block !important;  /* sovrascrive eventuale display:block globali */
    height: 26px; width: auto;
    cursor: pointer; user-select: none;
    margin: 0 !important;
  }

  .mobile-header .right-space{
    grid-column: 3;
    justify-self: end;
    width: var(--bar-h);
    height: 1px;
  }
}

/* =========================
   DESKTOP (≥ 769px)
   ========================= */
@media (min-width: 769px) {
  :host {
    position: sticky; /* resta in vista in cima anche su desktop */
    top: 0;
    z-index: 1100;
    background: #fff;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  }

  .desktop-header {
    background: transparent !important; /* usa lo sfondo dell’host */
    color: #000 !important;
    height: 72px;
    min-height: 72px !important;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 12px;
  }

  .desktop-header .logo-desktop-center {
    height: 48px;
    width: auto;
    display: block;
    cursor: pointer;
    user-select: none;
  }
}

/* =========================
   NOTE TECNICHE:
   - Richiede in index.html: <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
   - Non applicare padding-top di safe-area al body o al contenitore che scorre (.mat-sidenav-content),
     per evitare “gradini” o header che scompare sotto la tacca.
   - Per ancore interne, imposta scroll-padding-top sul contenitore che scorre nel foglio globale:
       .mat-drawer-content, .mat-sidenav-content { scroll-padding-top: calc(40px + env(safe-area-inset-top)); }
   ========================= */
