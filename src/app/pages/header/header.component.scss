

/* =========================================
   HEADER COMPONENT (app-header)
   - Sticky dentro lo scroller Material
   - Safe-area iOS gestita sull'header
   - Stili mobile e desktop
   ========================================= */

:host {
  display: block;
  width: 100%;
}

/* =========================
   MOBILE (≤ 768px)
   ========================= */
@media (max-width: 768px) {
  :host {
    --bar-h: 40px;                       /* altezza barra (escl. safe-area) */

    /* sticky dentro .mat-sidenav-content */
    position: sticky;
    top: 0;
    z-index: 1100;

    /* safe-area (tacca iOS) */
    padding-top: env(safe-area-inset-top);
    padding-top: constant(safe-area-inset-top); /* iOS legacy */

    /* dimensioni totali barra = bar-h + safe-area */
    height: calc(var(--bar-h) + env(safe-area-inset-top));
    height: calc(var(--bar-h) + constant(safe-area-inset-top)); /* legacy */
    min-height: calc(var(--bar-h) + env(safe-area-inset-top));
    min-height: calc(var(--bar-h) + constant(safe-area-inset-top)); /* legacy */

    /* bianco pieno, nessuna separazione */
    background: #fff !important;
    box-shadow: none !important;
    border-bottom: 0 !important;
  }

  /* Toolbar Material: usa lo sfondo dell'host, nessuna ombra/riga */
  .mobile-header,
  .mobile-header.mat-toolbar,
  .mobile-header.mat-mdc-toolbar,
  .mobile-header .mat-toolbar-row,
  .mobile-header .mat-mdc-toolbar-row {
    background: transparent !important;
    color: #000 !important;
    box-shadow: none !important;
    border: 0 !important;

    height: var(--bar-h);
    min-height: var(--bar-h) !important;

    display: grid;
    grid-template-columns: var(--bar-h) 1fr var(--bar-h); /* [menu][logo][spazio] */
    align-items: center;
    gap: .5rem;
  }

  /* elimina eventuali hairline dei temi */
  :host::before, :host::after,
  .mobile-header::before, .mobile-header::after {
    content: none !important;
  }

  .menu-button {
    border: 0;
    background: transparent;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: var(--bar-h);
    height: var(--bar-h);
    padding: 0;
  }

  .mobile-header .mat-icon,
  .mobile-header mat-icon {
    color: currentColor;
    line-height: 1;
  }

  .logo {
    height: 26px;            /* 24–28px consigliato su 40px */
    width: auto;
    justify-self: center;
    cursor: pointer;
    user-select: none;
  }

  .right-space {
    width: var(--bar-h);
    height: 1px;
    justify-self: end;
  }
}

/* (facoltativo ma utile)
   Contenuto sotto: bianco e ancore che tengono conto dell'header */
.mat-sidenav-content,
.mat-drawer-content {
  background: #fff !important;
  scroll-padding-top: calc(40px + env(safe-area-inset-top));
  scroll-padding-top: calc(40px + constant(safe-area-inset-top));
}

/* =========================
   DESKTOP (≥ 769px)
   ========================= */
@media (min-width: 769px) {
  :host {
    position: sticky; /* resta in vista in cima anche su desktop */
    top: 0;
    z-index: 1100;
    background: #fff;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  }

  .desktop-header {
    background: transparent !important; /* usa lo sfondo dell’host */
    color: #000 !important;
    height: 72px;
    min-height: 72px !important;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 12px;
  }

  .desktop-header .logo-desktop-center {
    height: 48px;
    width: auto;
    display: block;
    cursor: pointer;
    user-select: none;
  }
}

/* =========================
   NOTE TECNICHE:
   - Richiede in index.html: <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
   - Non applicare padding-top di safe-area al body o al contenitore che scorre (.mat-sidenav-content),
     per evitare “gradini” o header che scompare sotto la tacca.
   - Per ancore interne, imposta scroll-padding-top sul contenitore che scorre nel foglio globale:
       .mat-drawer-content, .mat-sidenav-content { scroll-padding-top: calc(40px + env(safe-area-inset-top)); }
   ========================= */
