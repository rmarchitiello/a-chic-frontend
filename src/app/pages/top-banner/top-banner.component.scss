/* ============================================================
   TOP BANNER COMPONENT
   - Presuppone un "tappo" fisso in alto (html/body::before)
     alto max(env(safe-area-inset-top), 44px).
   - Su mobile il banner NON è sticky: scorre via.
   - Su desktop il banner è sticky: resta agganciato al top.
   ============================================================ */

/* Contenitore del componente */
:host {
  display: block;
  box-sizing: border-box;
  background: #000;           /* colore del banner */
  color: #fff;                /* testo del banner */
  overflow: hidden;           /* nasconde il testo che scorre ai bordi */
}

/* ============================
   MOBILE (≤768px): non sticky
   ============================ */
@media (max-width: 768px) {
  :host {
    position: static;   /* scorre nel flusso */
    margin-top: 0;      /* niente offset: lo dà già lo scroller */
    min-height: 40px;   /* altezza visiva del banner */
    padding-inline: .6rem;
    overflow: hidden;
  }

  /* Testo scorrelvole (marquee) */
  .top-banner-mobile p {
    margin: 0;
    display: flex;
    align-items: center;
    gap: 1.5rem;
    white-space: nowrap;
    width: max-content;
    will-change: transform;
    animation: marquee-mobile 20s linear infinite;
  }

  .marquee-segment {
    display: inline-block;
  }
}

/* ============================
   DESKTOP (≥769px): sticky
   ============================ */
@media (min-width: 769px) {
  :host {
    position: sticky;          /* resta agganciato al top quando si scrolla */
    top: 0;                    /* bordo superiore del viewport/container */
    height: 2.2rem;            /* altezza fissa del banner desktop */
    padding-inline: .75rem;
    z-index: 1002;             /* sopra al contenuto, sotto eventuali header modali */
  }

  .top-banner-desktop p {
    margin: 0;
    display: flex;
    align-items: center;
    gap: 2rem;
    white-space: nowrap;
    width: max-content;
    will-change: transform;
    animation: marquee-desktop 28s linear infinite;
  }

  .marquee-segment {
    display: inline-block;
  }
}

/* ============================
   Animazioni marquee
   (due copie del testo → -50% = loop continuo)
   ============================ */
@keyframes marquee-mobile {
  from { transform: translateX(0); }
  to   { transform: translateX(-50%); }
}
@keyframes marquee-desktop {
  from { transform: translateX(0); }
  to   { transform: translateX(-50%); }
}

/* ============================
   Accessibilità: riduci animazioni
   ============================ */
@media (prefers-reduced-motion: reduce) {
  .top-banner-mobile p,
  .top-banner-desktop p {
    animation-duration: 999s; /* praticamente fermo */
  }
}
