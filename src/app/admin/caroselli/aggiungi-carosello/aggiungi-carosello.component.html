<!--
  In questo template imposto i label dei campi di Angular Material sempre “flottanti” sopra ai campi.
  Lo faccio aggiungendo floatLabel="always" su TUTTI i <mat-form-field>.
  In questo modo il comportamento del label è coerente tra input e select: il testo del label resta fuori dal campo,
  come nell’esempio “Allineamento (align)”. Mantengo appearance="outline" e non modifico la struttura del form.

  Struttura generale:
  - Header: titolo e sottotitolo esplicativi.
  - Sezione "Impostazioni di base": nome, titolo sezione, switch circular, select align/mode, durata.
  - Sezione "Plugin": tre toggle e un numero per l’autoplay.
  - Sezione "Stile e animazioni": classi wrapper/pannello e toggle per lo zoom.
  - Azioni: annulla (chiude il dialog se usato in MatDialog) e salva (submit del form).
-->

<form [formGroup]="form" (ngSubmit)="onSubmit()" class="form-carosello">

  <!-- HEADER: qui presento lo scopo del form con un titolo iconico e un sottotitolo breve -->
  <h2 class="form-title">
    <mat-icon color="primary" aria-hidden="true">add_to_photos</mat-icon>
    <span>Crea il tuo carosello</span>
  </h2>
  <p class="form-subtitle">Imposta nome, opzioni, plugin e stile del carosello.</p>

  <mat-divider></mat-divider>

  <!-- =======================
       SEZIONE: IMPOSTAZIONI DI BASE
       Qui raccolgo i campi fondamentali per istanziare il carosello.
       ======================= -->
  <div class="section-title">
    <mat-icon color="primary" aria-hidden="true">settings</mat-icon>
    <span>Impostazioni di base</span>
  </div>

  <!-- Nome (UI): imposto il label sempre visibile sopra al campo -->
  <mat-form-field appearance="outline" floatLabel="always">
    <mat-label>Nome carosello</mat-label>
    <mat-icon matPrefix aria-hidden="true">drive_file_rename_outline</mat-icon>
    <input matInput type="text" formControlName="name" autocomplete="off" required />
    <mat-hint align="end">Es. “Hero”, “Modelli in evidenza”</mat-hint>
    <mat-error *ngIf="form.get('name')?.hasError('required') && form.get('name')?.touched">
      Obbligatorio
    </mat-error>
  </mat-form-field>

  <!-- Titolo sezione (h2): anche qui forzo il label flottante per coerenza visiva -->
  <mat-form-field appearance="outline" floatLabel="always">
    <mat-label>Titolo sezione</mat-label>
    <mat-icon matPrefix aria-hidden="true">title</mat-icon>
    <input matInput type="text" formControlName="titoloSezione" placeholder="Es. Best seller" />
  </mat-form-field>

  <!-- Circular: uso uno slide-toggle per indicare la modalità infinita del carosello -->
  <mat-slide-toggle color="primary" formControlName="circular">Carosello infinito (circular)</mat-slide-toggle>

  <!-- Align: select con label sempre sopra e validazione richiesta -->
  <mat-form-field appearance="outline" floatLabel="always">
    <mat-label>Allineamento (align)</mat-label>
    <mat-icon matPrefix aria-hidden="true">format_align_center</mat-icon>
    <mat-select formControlName="align" required>
      <mat-option value="center">center</mat-option>
      <mat-option value="prev">prev</mat-option>
      <mat-option value="next">next</mat-option>
    </mat-select>
    <mat-error *ngIf="form.get('align')?.hasError('required')">Obbligatorio</mat-error>
  </mat-form-field>

  <!-- Mode: select per la modalità di scorrimento; label forzato in alto -->
  <mat-form-field appearance="outline" floatLabel="always">
    <mat-label>Modalità (mode)</mat-label>
    <mat-icon matPrefix aria-hidden="true">tune</mat-icon>
    <mat-select formControlName="mode" required>
      <mat-option value="no-scroll">no-scroll</mat-option>
      <mat-option value="snap">snap</mat-option>
      <mat-option value="freeScroll">freeScroll</mat-option>
    </mat-select>
    <mat-error *ngIf="form.get('mode')?.hasError('required')">Obbligatorio</mat-error>
  </mat-form-field>

  <!-- Duration: numero in millisecondi; mantengo il suffisso “ms” come aiuto visivo -->
  <mat-form-field appearance="outline" floatLabel="always">
    <mat-label>Durata</mat-label>
    <mat-icon matPrefix aria-hidden="true">speed</mat-icon>
    <input matInput type="number" formControlName="duration" required />
    <span matSuffix>ms</span>
    <mat-hint align="end">0 = istantaneo (senza animazione)</mat-hint>
    <mat-error *ngIf="form.get('duration')?.hasError('required')">Obbligatorio</mat-error>
  </mat-form-field>

  <mat-divider></mat-divider>

  <!-- =======================
       SEZIONE: PLUGIN
       Qui raccolgo le opzioni dei plugin del carosello.
       ======================= -->
  <div class="section-title">
    <mat-icon color="primary" aria-hidden="true">extension</mat-icon>
    <span>Plugin</span>
  </div>

  <!-- Gruppo annidato: plugins. Mantengo i toggle e aggiungo il campo numerico per l’autoplay. -->
  <div formGroupName="plugins">

    <!-- Attivo/disattivo frecce di navigazione -->
    <mat-slide-toggle color="primary" formControlName="arrow">Freccia (arrow)</mat-slide-toggle>

    <!-- Attivo/disattivo transizione in dissolvenza -->
    <mat-slide-toggle color="primary" formControlName="fade">Transizione fade</mat-slide-toggle>

    <!-- Attivo/disattivo la paginazione a pallini -->
    <mat-slide-toggle color="primary" formControlName="bullet">Pallini (pagination: bullet)</mat-slide-toggle>

    <!-- Autoplay: numero in ms; label flottante sempre in alto -->
    <mat-form-field appearance="outline" floatLabel="always">
      <mat-label>Autoplay</mat-label>
      <mat-icon matPrefix aria-hidden="true">av_timer</mat-icon>
      <input matInput type="number" formControlName="autoplay" />
      <span matSuffix>ms</span>
      <mat-hint align="end">0 = disattivo</mat-hint>
    </mat-form-field>

  </div>

  <mat-divider></mat-divider>

  <!-- =======================
       SEZIONE: STILE E ANIMAZIONI
       Qui definisco classi CSS e l’animazione di zoom.
       ======================= -->
  <div class="section-title">
    <mat-icon color="primary" aria-hidden="true">brush</mat-icon>
    <span>Stile e animazioni</span>
  </div>

  <!-- Classi wrapper: suggerisco come separare più classi e forzo label in alto -->
  <mat-form-field appearance="outline" floatLabel="always">
    <mat-label>Classi wrapper</mat-label>
    <mat-icon matPrefix aria-hidden="true">view_carousel</mat-icon>
    <input matInput formControlName="wrapperClass" placeholder="Es. wrapper-carosello by-2" required />
    <mat-hint align="end">Separale con spazio o virgola</mat-hint>
    <mat-error *ngIf="form.get('wrapperClass')?.hasError('required')">Obbligatorio</mat-error>
  </mat-form-field>

  <!-- Classi pannello: label flottante in alto e validazione richiesta -->
  <mat-form-field appearance="outline" floatLabel="always">
    <mat-label>Classi pannello</mat-label>
    <mat-icon matPrefix aria-hidden="true">layers</mat-icon>
    <input matInput formControlName="panelClass" placeholder="Es. pannelli-carosello" required />
    <mat-error *ngIf="form.get('panelClass')?.hasError('required')">Obbligatorio</mat-error>
  </mat-form-field>

  <!-- Toggle per animazione zoom: lo mantengo semplice e chiaro -->
  <mat-slide-toggle color="primary" formControlName="zoomMediaCarosello">
    Animazione zoom al cambio slide
  </mat-slide-toggle>

  <mat-divider></mat-divider>

  <!-- AZIONI: annulla (chiude il dialog se presente) e salva (submit del form) -->
  <div class="actions">
    <button mat-stroked-button type="button" mat-dialog-close>Annulla</button>
    <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid">
      Salva
    </button>
  </div>
</form>
