/* =========================================================
   FORM CAROSELLO — PALETTE BLU/VERDE (BASICO)
   Io uso:
   - Blu accento: #1f6feb (testi/azioni principali)
   - Blu soft:   #eef5ff (pannelli chiari, sfondi soffici)
   - Verde accento: #22a86a (azioni “positive”)
   - Grigi neutri per testo/bordi
   ========================================================= */

/* Card del form: fondo chiaro, bordo sottile, ombra leggera */
.form-carosello {
  background: #ffffff;
  border: 1px solid #e7e9ee;
  border-radius: 12px;
  box-shadow: 0 6px 18px rgba(0, 0, 0, .06);
}

/* Titolo principale: blu accento */
.form-title {
  display: flex;
  align-items: center;
  gap: 8px;
  color: #1f6feb; /* blu accento */
}

/* Sottotitolo: grigio medio */
.form-subtitle {
  color: #667085;
}

/* Divider come blocco per gestire il margine verticalmente */
mat-divider {
  display: block;
}

/* Titoli di sezione: testo scuro, puntino blu “soft” dietro */
.section-title {
  display: flex;
  align-items: center;
  gap: 8px;
  color: #2b2f36;
  font-weight: 600;
  background: #eef5ff;     /* blu soft */
  border: 1px solid #e7eefc;
  padding: 8px 10px;
  border-radius: 8px;
}

/* Campi full-width di base */
.form-carosello mat-form-field {
  width: 100%;
}

/* Toggle su riga dedicata */
.form-carosello mat-slide-toggle {
  display: block;
}

/* Area azioni a destra */
.actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}

/* ---------------------------------------------------------
   RITOCCHI MINIMI MATERIAL (MDC)
   Io aumento contrasto e allineo i colori all’accento blu/verde.
   --------------------------------------------------------- */

/* Label sempre leggibili */
.mat-mdc-form-field .mdc-floating-label,
.mat-mdc-form-field .mdc-floating-label--float-above {
  color: #1b1f24;
  opacity: 1;
}

/* Hint in grigio medio */
.mat-mdc-form-field-hint {
  color: #6b7280;
}

/* Errori in rosso visibile ma non eccessivo */
.mat-mdc-form-field-error {
  color: #cc2b2b;
  font-weight: 600;
}

/* Outline dei campi più netto */
.mdc-notched-outline__leading,
.mdc-notched-outline__notch,
.mdc-notched-outline__trailing {
  border-color: #d7dbe3;
}

/* Stato focus: bordo blu accento */
.mat-mdc-form-field.mat-focused .mdc-notched-outline__leading,
.mat-mdc-form-field.mat-focused .mdc-notched-outline__notch,
.mat-mdc-form-field.mat-focused .mdc-notched-outline__trailing {
  border-color: #1f6feb;
}

/* Icone prefix/suffix tono neutro */
.mat-mdc-form-field-icon-prefix,
.mat-mdc-form-field-icon-suffix {
  color: #475569;
}

/* Bottoni azioni */
.actions button[mat-stroked-button] {
  border-color: #d5d9e3;
  color: #1b1f24;
  background: #f6f8fc;
}
.actions button[mat-raised-button] {
  background: #1f6feb; /* blu accento */
  color: #ffffff;
}
.actions button[mat-raised-button][disabled] {
  background: #9fc2ff; /* blu schiarito */
  color: #f1f5f9;
}

/* Se vuoi usare il verde per un’azione positiva specifica:
   aggiungo una utility semplice che posso applicare al bottone */
.actions .btn-success[mat-raised-button] {
  background: #22a86a; /* verde accento */
  color: #ffffff;
}

/* =========================================================
   SCROLL VERTICALE NEL POPUP (MAT DIALOG)
   Io rendo il dialog SEMPRE scrollabile in Y dentro la viewport.
   Questa soluzione non richiede HTML speciale.
   ========================================================= */

/* Variante “sicura” (component SCSS): raggiungo l’overlay con ::ng-deep.
   Se usi panelClass: 'popup-admin-editor', questi selettori la sfruttano.
   Puoi tenere sia le regole generiche sia quelle con la panelClass. */
:host ::ng-deep .cdk-overlay-pane {
  display: flex;         /* così la surface può adattarsi */
  align-items: stretch;
  max-height: 100vh;     /* limito alla finestra */
  overflow: hidden;      /* lo scroller sarà la surface */
}
:host ::ng-deep .cdk-overlay-pane .mat-mdc-dialog-surface {
  display: block;
  max-height: 100%;
  overflow-y: auto;      /* scroller verticale del popup */
}

/* Se usi una panelClass specifica, applico le stesse regole (ridondanza utile) */
:host ::ng-deep .cdk-overlay-pane.popup-admin-editor {
  display: flex;
  align-items: stretch;
  max-height: 100vh;
  overflow: hidden;
}
:host ::ng-deep .cdk-overlay-pane.popup-admin-editor .mat-mdc-dialog-surface {
  max-height: 100%;
  overflow-y: auto;
}

/* Se nel template usi <mat-dialog-content>, io rimuovo i limiti interni
   perché voglio che scrolli la surface di cui sopra. */
:host ::ng-deep .mat-mdc-dialog-content {
  max-height: none;
  overflow: visible;
  padding: 0;
}

/* =========================================================
   MOBILE (≤ 768px)
   Io tengo layout compatto e leggibile.
   ========================================================= */
@media (max-width: 768px) {
  .form-carosello {
    padding: 16px;
    margin: 0 auto;
    max-width: 100%;
  }
  .form-title {
    margin: 0 0 6px 0;
    font-size: 20px;
    line-height: 1.2;
  }
  .form-subtitle {
    margin: 0 0 12px 0;
    font-size: 14px;
  }
  mat-divider {
    margin: 12px 0;
  }
  .section-title {
    margin: 16px 0 8px 0;
    font-size: 16px;
  }
  .form-carosello mat-form-field {
    margin-bottom: 12px;
  }
  .form-carosello mat-slide-toggle {
    margin: 8px 0 12px 0;
  }
  .actions {
    margin-top: 16px;
  }

  /* Popup: lascio spazio alla UI di sistema */
  :host ::ng-deep .cdk-overlay-pane {
    max-height: 90vh;
  }
}

/* =========================================================
   DESKTOP (≥ 769px)
   Io aumento spazi in modo sobrio e coerente.
   ========================================================= */
@media (min-width: 769px) {
  .form-carosello {
    max-width: 900px;
    padding: 24px 28px;
    border-radius: 14px;
    margin: 0 auto;
  }
  .form-title {
    font-size: 22px;
    margin-bottom: 8px;
  }
  .form-subtitle {
    font-size: 15px;
    margin-bottom: 16px;
  }
  mat-divider {
    margin: 16px 0;
  }
  .section-title {
    margin-top: 24px;
    margin-bottom: 10px;
    font-size: 18px;
  }
  .form-carosello mat-form-field {
    margin-bottom: 14px;
  }
  .form-carosello mat-slide-toggle {
    margin: 10px 0 14px 0;
  }
  .actions {
    margin-top: 20px;
  }

  /* Popup: posso usare un po’ più viewport su desktop */
  :host ::ng-deep .cdk-overlay-pane {
    max-height: 92vh;
  }
}
