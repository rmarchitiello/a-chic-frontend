<div class="dialog-content">

  <!-- Pulsante per chiudere il dialog -->
  <button class="chiudi-btn" mat-icon-button (click)="chiudiDialog()">
    <mat-icon>close</mat-icon>
  </button>

  <!-- Contenitore di tutte le card -->
  <div class="preview-container">

    <!-- Ciclo su ogni immagine frontale -->
    <div 
      class="preview-card"
      *ngFor="let url of mediasUrlsFrontale"
      (mouseenter)="hoveredCard = url"
      (mouseleave)="hoveredCard = null"
    >

      <!-- Recupero context relativo -->
      <ng-container *ngIf="contextMap[url] as context">
        <img [src]="url" [alt]="context.display_name" />

        <!-- Metadati contestuali -->
        <div class="media-display-name">
          <span 
            class="tooltip-wrapper"
            [matTooltip]="context.descrizione"
            matTooltipClass="tooltip-admin"
            [matTooltipDisabled]="!isLongText(context.descrizione)"
            matTooltipPosition="above"
          >
            <ng-container *ngFor="let contextFormatted of getOrderedFormattedEntries(context)">
              <div class="context-entry">
                <strong class="context-label">{{ contextFormatted.label }}:</strong>
                <span class="context-value">{{ getPreview(contextFormatted.value) }}</span>
              </div>
            </ng-container>
          </span>
        </div>

        <!-- Box fluttuante con immagini non frontali -->
        <ng-container *ngIf="mapUrlsNoFrontali[url] as urlsNoFrontali">
          <div 
            class="non-frontali-overlay"
            *ngIf="urlsNoFrontali.length > 0 && hoveredCard === url"
          >
            <img
              *ngFor="let urlLaterale of urlsNoFrontali"
              [src]="urlLaterale"
              class="non-frontale-img"
              [alt]="context.display_name + ' - angolazione laterale'"
            />
          </div>
        </ng-container>

      </ng-container>

    </div>

  </div>

</div>
