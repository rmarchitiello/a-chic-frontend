<!-- Header con azioni principali -->
<div class="popup-header">
  <!-- Pulsante Chiudi (senza mat-icon-button per evitare il cerchio) -->
  <button
    class="chiudi-btn"
    type="button"
    matTooltip="Chiudi"
    [matTooltipClass]="'tooltip-custom'"
    (click)="chiudiDialog()">
    <mat-icon>close</mat-icon>
  </button>

  <div class="header-actions">
    <button mat-stroked-button color="primary" (click)="onAdd()">
      <mat-icon>create_new_folder</mat-icon>
      Aggiungi
    </button>

    <button mat-stroked-button color="accent" (click)="onRename()" [disabled]="!selectedPath">
      <mat-icon>drive_file_rename_outline</mat-icon>
      Rinomina
    </button>

    <button mat-stroked-button color="warn" (click)="onDelete()" [disabled]="!selectedPath">
      <mat-icon>delete</mat-icon>
      Cancella
    </button>
  </div>
</div>

<!-- Corpo dialog: SOLO lista piatta con indentazione visiva in base alla profondità -->
<mat-dialog-content>
  <div class="popup-body solo-albero">
    <div class="folder-tree">
      <ng-container *ngIf="flatNodes?.length; else noFolders">
        <div
          class="tree-node"
          *ngFor="let f of flatNodes"
          [class.active]="selectedPath === f.fullPath"
          [style.paddingLeft.px]="f.depth * 14"
          (click)="onSelectPath(f.fullPath)">
          {{ f.name }}
        </div>
      </ng-container>

      <ng-template #noFolders>
        <div class="alert">Nessuna cartella presente. Usa “Aggiungi” per crearne una.</div>
      </ng-template>
    </div>
  </div>
</mat-dialog-content>
