/* ===========================
   HEADER (sticky) + CHIUDI
   =========================== */
.popup-header {
  position: sticky;
  top: 0;
  z-index: 2;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: .75rem;
  /* più spazio a destra per non sovrapporre la X ai pulsanti */
  padding: 1rem 3rem 1rem 1.25rem;
  border-bottom: 1px solid rgba(0, 0, 0, 0.08);
  background: #fff;

  /* pulsante X senza cerchio/ripple, spostato più in alto */
  .chiudi-btn {
    position: absolute;
    top: .35rem;      /* alzato */
    right: .5rem;     /* più vicino al bordo */
    z-index: 10;
    background: transparent;
    border: none;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: .25rem;

    mat-icon {
      color: #111;
      font-size: 26px;
      width: 26px;
      height: 26px;
      line-height: 26px;
    }

    &:hover mat-icon {
      color: #000;
    }

    &:focus-visible {
      outline: none;
      box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.25);
      border-radius: 12px;
    }
  }
}

.popup-title {
  margin: 0;
  font-size: 1.1rem;
  font-weight: 600;
}

.header-actions {
  display: inline-flex;
  align-items: center;
  gap: .5rem;

  .mat-mdc-button-base { height: 36px; }

  /* Rende davvero "rosso" il pulsante Cancella (outlined + warn) */
  .mat-mdc-outlined-button.mat-warn {
    /* colori di base */
    --warn-text: #b91c1c;  /* rosso scuro testo */
    --warn-brd:  #f87171;  /* rosso medio bordo */
    --warn-bg:   #fee2e2;  /* rosso chiarissimo bg */

    color: var(--warn-text);
    background: var(--warn-bg);
    border-color: var(--warn-brd);

    /* bordi degli outlined MDC */
    .mdc-button__ripple { border-radius: 9999px; }
  }

  .mat-mdc-outlined-button.mat-warn:hover:not(.mdc-button--disabled) {
    color: #991b1b;
    background: #fecaca;
    border-color: #ef4444;
  }

  /* icona interna coerente con il testo */
  .mat-mdc-outlined-button.mat-warn mat-icon {
    color: inherit;
  }

  /* stato disabilitato più tenue */
  .mat-mdc-outlined-button.mat-warn.mdc-button--disabled {
    color: rgba(185, 28, 28, 0.45);
    border-color: rgba(248, 113, 113, 0.45);
    background: rgba(254, 226, 226, 0.45);
  }
}

/* ===========================
   CORPO: SOLO ALBERO
   =========================== */
.popup-body.solo-albero {
  display: flex;
  flex-direction: column;
  flex: 1 1 auto;
  padding: 1rem 1.25rem;
  overflow: hidden; /* lo scroll è dentro .folder-tree */
}

/* Contenitore con scrollbar interna */
.folder-tree {
  flex: 1 1 auto;
  min-height: 0; /* necessario con flex per abilitare lo scroll interno */
  border: 1px solid rgba(0, 0, 0, 0.08);
  border-radius: 12px;
  padding: .75rem;
  background: #fafafa;
  overflow: auto;
}

/* Riga cartella (indentazione via [style.paddingLeft.px]) */
.tree-node {
  display: block;
  padding: .35rem .5rem;
  border-radius: 8px;
  cursor: pointer;
  user-select: none;
  transition: background .15s ease;

  &:hover {
    background: rgba(25, 118, 210, 0.08);
  }

  &.active {
    background: rgba(25, 118, 210, 0.12);
    color: #0b5ab3;
    font-weight: 600;
  }
}

/* Messaggio “nessuna cartella” */
.alert {
  display: flex;
  align-items: center;
  gap: .5rem;
  background: #fff3cd;
  color: #856404;
  border: 1px solid #ffeeba;
  padding: .5rem .75rem;
  border-radius: 10px;
}

/* ===========================
   RESPONSIVE
   =========================== */
@media (max-width: 980px) {
  .popup-header { padding-right: 2.5rem; }
  .popup-body.solo-albero { padding: .75rem 1rem; }
}
