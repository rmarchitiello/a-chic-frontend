<!-- Contenuto principale del dialog -->
<div mat-dialog-content class="delete-dialog-content">

  <!-- Overlay con spinner visibile durante l'eliminazione -->
  <div class="eliminazione-overlay" *ngIf="eliminazioneInCorso">
    <mat-spinner diameter="48"></mat-spinner>
    <p>Eliminazione in corso...</p>
  </div>

  <!-- Contenitore anteprime immagini -->
  <div class="preview-container" [class.blur]="eliminazioneInCorso">

    <!-- Ciclo su ogni immagine da mostrare (usando ng-container per evitare conflitto con *ngIf) -->
    <ng-container *ngFor="let img of mediaInput">
      <div *ngIf="!img.inEliminazione"
           class="preview-wrapper"
           [ngClass]="{
             'errore': img.erroreEliminazione,
             'in-eliminazione': img.inEliminazione
           }"
           [matTooltip]="img.dettaglioErrore || ''"
           matTooltipPosition="above">

        <!-- Pulsante elimina singola immagine -->
        <button class="delete-btn"
                mat-icon-button
                color="warn"
                aria-label="Elimina immagine"
                (click)="deleteMedia(false, img)">
          <mat-icon>delete</mat-icon>
        </button>

        <!-- Anteprima immagine -->
        <img [src]="img.url"
             [alt]="img.display_name"
             class="preview-img" />

        <!-- Nome dell'immagine -->
        <p>{{ img.display_name }}</p>
      </div>
    </ng-container>
  </div>

  <!-- Messaggio di conferma -->
  <p class="confirm-text" [class.blur]="eliminazioneInCorso">
    Sei sicuro di voler eliminare
    <ng-container *ngIf="mediaInput.length === 1; else multiple">
      questa immagine dal carosello?
    </ng-container>
    <ng-template #multiple>
      queste {{ mediaInput.length }} immagini dal carosello?
    </ng-template>
  </p>
</div>

<!-- Azioni in basso -->
<div mat-dialog-actions align="end"
     class="delete-dialog-actions"
     [class.blur]="eliminazioneInCorso">

  <!-- Pulsante Annulla -->
  <button mat-stroked-button
          color="primary"
          type="button"
          (click)="annulla()">
    Annulla
  </button>

  <!-- Pulsante elimina tutte -->
  <button mat-flat-button
          color="warn"
          type="button"
          (click)="deleteMedia(true)">
    Elimina tutte le immagini
  </button>
</div>
