<!-- Mostro un blocco di avviso se l'utente è su mobile -->
<div *ngIf="isMobile" class="mobile-blocked">
  <h2>Accesso CMS non disponibile su mobile</h2>
  <p>Per motivi di sicurezza e usabilità, accedi da un dispositivo desktop.</p>
</div>

<!-- Se sono su desktop, mostro il form CMS -->
<div *ngIf="!isMobile" class="cms-layout">
    <div style="display: flex; justify-content: space-between; align-items: center;">
  <button mat-stroked-button color="primary" (click)="goToMedia('/cms/media')">
            Vai a Gestione Contenuti
  </button>

  <h2 style="flex-grow: 1; text-align: center;">Upload media su Cloudinary</h2>
</div>

  <!-- Form per l'upload -->
  <form #uploadForm="ngForm" (ngSubmit)="uploadFile()" class="upload-form">

    <!-- Campo file -->
    <div class="form-group">
      <label for="file">Seleziona file</label>
      <input
        type="file"
        name="file"
        required
        (change)="onFileSelected($event)"
      />
    </div>

    <!-- Cartella Cloudinary: input + menu selezione -->
    <div class="form-group">
      <label>Categoria (Borse, Charm, Audio, Video...)</label>

      <!-- Input libero -->
      <input
        type="text"
        name="folderCloudinary"
        placeholder="Puoi anche creare una nuova categoria o sottocategorie"
        [(ngModel)]="folderCloudinary"
        required
        (input)="checkInputFolder()"
      />

      <!-- Selettore da lista esistente -->
      <mat-form-field appearance="fill" *ngIf="menuATendinaFolder">
        <mat-label>Seleziona una cartella esistente</mat-label>
        <mat-select
          [value]="folderCloudinary"
          (selectionChange)="folderCloudinary = $event.value"
        >
          <mat-option *ngFor="let folder of foldersCaricate" [value]="folder">
            {{ folder }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <!-- Nome file -->
    <div class="form-group">
      <label>Nome file visualizzato</label>
      <input
        type="text"
        name="fileNameCloudinary"
        placeholder="Inserire nome del file da caricare: es, Borsa Perlata Nera"
        [(ngModel)]="fileNameCloudinary"
        required
      />
    </div>

    <!-- Descrizione -->
    <div class="form-group">
      <label>Descrizione</label>
      <textarea
        name="descrizioneCloudinary"
        [(ngModel)]="descrizioneCloudinary"
        required
      ></textarea>
    </div>

    <!-- Quantità -->
    <div class="form-group">
      <label>Quantità</label>
      <input
        type="number"
        name="quantitaCloudinary"
        (ngModelChange)="checkQuantita($event)"
        [(ngModel)]="quantitaCloudinary"
        required
      />
    </div>

    <!-- Angolazione -->
    <div class="form-group">
      <label>Angolazione (es. frontale, laterale)</label>
      <mat-form-field appearance="fill">
        <mat-label>Seleziona l'angolazione</mat-label>
        <mat-select
          name="angolazioneCloudinary"
          [(ngModel)]="angolazioneCloudinary"
          required
        >
          <mat-option value="frontale">Frontale</mat-option>
          <mat-option value="laterale">Laterale</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <!-- Pulsante submit -->
    <button type="submit" [disabled]="uploadForm.invalid">
      Carica su Cloudinary
    </button>

  </form>
</div>
