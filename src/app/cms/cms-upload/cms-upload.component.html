<!-- Blocco per mobile -->
<div *ngIf="isMobile" class="mobile-blocked">
  <h2>Accesso CMS non disponibile su mobile</h2>
  <p>Per motivi di sicurezza e usabilità, accedi da un dispositivo desktop.</p>
</div>

<!-- Layout CMS desktop -->
<div *ngIf="!isMobile" class="cms-layout">

  <!-- Intestazione con titolo e pulsante -->
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
    <button mat-stroked-button color="primary" (click)="goToMedia('/cms/media')">
      Vai a Gestione Contenuti
    </button>
    <h2 style="margin: 0 auto;">Upload media su Cloudinary</h2>
    <div style="width: 180px;"></div> <!-- Per bilanciare il bottone a sinistra -->
  </div>

  <!-- Form upload -->
  <form #uploadForm="ngForm" (ngSubmit)="uploadFile()" class="upload-form">

    <!-- File -->
    <div class="form-group" >
      <label for="file">Seleziona file</label>
      <input     [disabled]="!isAudioOrVideo && !isImageBox"
           type="file" name="file" required (change)="onFileSelected($event)" />
    </div>

    <!-- Checkbox per segnalare Audio o Video -->
<div class="form-group">
  <!-- Checkbox audio/video -->
  <mat-checkbox
    [ngModel]="isAudioOrVideo"
    (ngModelChange)="onAudioOrVideoChange($event)"
    name="isAudioOrVideo"
  >
    Questo file è un audio o un video
  </mat-checkbox>

  <!-- Checkbox immagine -->
  <mat-checkbox
    [ngModel]="isImageBox"
    (ngModelChange)="onImageBoxChange($event)"
    name="isImageBox"
  >
    Questo file è un immagine
  </mat-checkbox>
</div>
    <!-- Categoria/cartella -->
    <div class="form-group">
      <label>Categoria (Borse, Charm, Audio, Video...)</label>
      <input
        type="text"
        name="folderCloudinary"
        placeholder="Puoi anche creare una nuova categoria o sottocategorie"
        [(ngModel)]="folderCloudinary"
        required
        (input)="checkInputFolder()"
      />
      <mat-form-field appearance="fill" *ngIf="menuATendinaFolder">
        <mat-label>Seleziona una cartella esistente</mat-label>
        <mat-select
          [value]="folderCloudinary"
          (selectionChange)="folderCloudinary = $event.value">
          <mat-option *ngFor="let folder of foldersCaricate" [value]="folder">
            {{ folder }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <!-- Nome file -->
    <div class="form-group">
      <label>Nome file visualizzato</label>
      <input
        type="text"
        name="fileNameCloudinary"
        placeholder="Inserire nome del file da caricare: es, Borsa Perlata Nera"
        [(ngModel)]="fileNameCloudinary"
        required
      />
    </div>

    <!-- Descrizione -->
    <div class="form-group">
      <label>Descrizione</label>
      <textarea
        name="descrizioneCloudinary"
        [(ngModel)]="descrizioneCloudinary"
        required>
      </textarea>
    </div>

    <!-- Quantità -->
    <div class="form-group">
      <label>Quantità</label>
      <input
        type="number"
        name="quantitaCloudinary"
        min="0"
        [(ngModel)]="quantitaCloudinary"
        required
      />
    </div>

    <!-- Angolazione: solo se non è audio/video -->
    <div class="form-group" *ngIf="!isAudioOrVideo">
      <label>Angolazione (es. frontale, laterale)</label>
      <mat-form-field appearance="fill">
        <mat-label>Seleziona l'angolazione</mat-label>
        <mat-select
          name="angolazioneCloudinary"
          [(ngModel)]="angolazioneCloudinary"
          required>
          <mat-option value="frontale">Frontale</mat-option>
          <mat-option value="laterale">Laterale</mat-option>
          <mat-option value="retro">Retro</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <!-- Pulsante submit -->
    <button type="submit" [disabled]="uploadForm.invalid">
      Carica su Cloudinary
    </button>

  </form>
</div>
