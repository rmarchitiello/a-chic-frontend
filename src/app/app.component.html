<!-- CMS attivo: mostra solo la login o il pannello CMS -->
<!-- Mostra solo il CMS -->
<ng-container *ngIf="!isMobile && isCmsAttivo">
  <router-outlet></router-outlet>
</ng-container>



<!-- PARTE DESKTOP-->
<ng-container *ngIf="!isMobile && !isCmsAttivo">
  <h1>SITO IN MANUTENZIONE</h1>
</ng-container>




<!-- PARTE MOBILE-->
<!-- Test scroll su mobile -->
<ng-container *ngIf="isMobile">

  <!-- HEADER SEMPRE VISIBILE (dove menuToggle e l evento del componente figli che quando viene premuto in mobile header component scaturisce sidenav.toggle)-->
  <app-header (menuToggle)="sidenav.toggle()"></app-header>

  <!-- SIDENAV + CONTENUTO -->
  <mat-sidenav-container class="sidenav-container">

    <!-- SIDENAV MOBILE -->
    <mat-sidenav #sidenav mode="over" [(opened)]="mobileMenuOpen">
      <div class="sidenav-content">
        <ng-container *ngFor="let categoria of categorie">
          <div
            class="sidenav-categoria"
            [class.attiva]="categoriaEspansa === categoria"
            (click)="strutturaCategorie[categoria].length > 0 ? toggleCategoria(categoria) : goToAndCloseSideNav(categoria)">
            {{ categoria }}
          </div>

          <div *ngIf="categoriaEspansa === categoria" [@expandCollapse] class="sotto-container">
            <div *ngFor="let sotto of strutturaCategorie[categoria]">
              <button class="sotto-categoria"
                      (click)="(filtriSottoCategorie[sotto] && filtriSottoCategorie[sotto].length > 0) ? toggleSottoCategoria(sotto) : goToAndCloseSideNav(categoria, sotto)">
                {{ sotto | titlecase }}
              </button>

              <div *ngIf="sottoCategoriaEspansa === sotto" [@expandCollapse] class="filtro-container">
                <button
                  class="filtro-categoria"
                  *ngFor="let filtro of filtriSottoCategorie[sotto]"
                  (click)="goToMobileQueryParamFilter(categoria, sotto, filtro); sidenav.close()">
                  {{ filtro | titlecase }}
                </button>
              </div>
            </div>
          </div>
        </ng-container>




      </div>
    </mat-sidenav>

    <!-- CONTENUTO PRINCIPALE -->
    <mat-sidenav-content>
      <div class="mobile-page-container">
        <router-outlet></router-outlet>
      </div>
    </mat-sidenav-content>

  </mat-sidenav-container>

  <!-- FOOTER SEMPRE VISIBILE -->
  <app-footer></app-footer>

  <!-- chat sempre visibile -->
     <app-live-chat></app-live-chat>
</ng-container>



